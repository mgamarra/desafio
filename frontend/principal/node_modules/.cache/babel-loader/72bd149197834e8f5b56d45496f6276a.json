{"ast":null,"code":"import _objectSpread from \"/Users/brunogomes/desafio/frontend/principal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport SuperagentBase, { enhanceSuperAgent } from \"./SuperagentBase\";\nimport Constants from \"../Constants\";\nimport Notifications from \"../ui/connected/Notifications/Notifications\"; //If had a existing stored token, use it\n\nvar base64Auth = sessionStorage.getItem(\"jwtToken\");\n\nvar getBackendHeaders = function getBackendHeaders() {\n  var obj = {\n    'Content-Type': 'application/json'\n  };\n  if (base64Auth) obj[\"Authorization\"] = \"Bearer \" + base64Auth;\n  return obj;\n};\n\nvar headersPlugin = function headersPlugin(req) {\n  var headers = getBackendHeaders();\n  Object.keys(headers).forEach(function (e) {\n    req.set(e, headers[e]);\n  });\n};\n\nvar interceptorPlugin = function interceptorPlugin(err, res) {\n  if (err && !res) {\n    Notifications.addNotification([{\n      title: \"Causa 2: \",\n      message: \"O nosso servidor está enfrentando problemas temporários. \",\n      severity: \"DANGER\"\n    }, {\n      title: \"Causa 1: \",\n      message: \"Seu computador está sem acesso a internet. \",\n      severity: \"DANGER\"\n    }, {\n      message: \"Não foi possível realizar a ação solicitada. \\n As causas mais comuns são:\",\n      severity: \"DANGER\"\n    }]);\n  }\n}; // const multipart = (url, headers, method, data) => {\n// \treturn new Promise((resolve, reject) => {\n// \t\twindow.$.ajax({\n// \t\t\turl: `${Constants.API_BASE_PATH}${url}`,\n// \t\t\ttype: method,\n// \t\t\theaders,\n// \t\t\tdata: data,\n// \t\t\tcache: false,\n// \t\t\tcontentType: false,\n// \t\t\tprocessData: false,\n// \t\t\tsuccess: (res) => resolve({body: res}),\n// \t\t\terror: (res) => reject({response: {body: JSON.parse(res.responseText)}})\n// \t\t});\n// \t});\n// };\n\n\nexport default _objectSpread({}, enhanceSuperAgent(SuperagentBase, Constants.API_BASE_PATH, headersPlugin, interceptorPlugin), {\n  setToken: function setToken(token) {\n    base64Auth = token;\n  },\n  getBackendHeaders: getBackendHeaders\n});","map":{"version":3,"sources":["/Users/brunogomes/desafio/frontend/principal/src/common/superagent/SuperagentBackend.js"],"names":["SuperagentBase","enhanceSuperAgent","Constants","Notifications","base64Auth","sessionStorage","getItem","getBackendHeaders","obj","headersPlugin","req","headers","Object","keys","forEach","e","set","interceptorPlugin","err","res","addNotification","title","message","severity","API_BASE_PATH","setToken","token"],"mappings":";AAAA,OAAOA,cAAP,IAAwBC,iBAAxB,QAAgD,kBAAhD;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,aAAP,MAA0B,6CAA1B,C,CAEA;;AACA,IAAIC,UAAU,GAAGC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAjB;;AAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC/B,MAAIC,GAAG,GAAG;AACT,oBAAgB;AADP,GAAV;AAIA,MAAIJ,UAAJ,EACCI,GAAG,CAAC,eAAD,CAAH,GAAuB,YAAYJ,UAAnC;AAED,SAAOI,GAAP;AACA,CATD;;AAWA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD,EAAS;AAC9B,MAAIC,OAAO,GAAGJ,iBAAiB,EAA/B;AAEAK,EAAAA,MAAM,CAACC,IAAP,CAAYF,OAAZ,EAAqBG,OAArB,CAA6B,UAAAC,CAAC,EAAI;AACjCL,IAAAA,GAAG,CAACM,GAAJ,CAAQD,CAAR,EAAWJ,OAAO,CAACI,CAAD,CAAlB;AACA,GAFD;AAGA,CAND;;AAQA,IAAME,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,GAAD,EAAMC,GAAN,EAAc;AACvC,MAAID,GAAG,IAAI,CAACC,GAAZ,EAAiB;AAChBhB,IAAAA,aAAa,CAACiB,eAAd,CAA8B,CAC7B;AACCC,MAAAA,KAAK,EAAE,WADR;AAECC,MAAAA,OAAO,EAAE,2DAFV;AAGCC,MAAAA,QAAQ,EAAE;AAHX,KAD6B,EAM7B;AACCF,MAAAA,KAAK,EAAE,WADR;AAECC,MAAAA,OAAO,EAAE,6CAFV;AAGCC,MAAAA,QAAQ,EAAE;AAHX,KAN6B,EAW7B;AACCD,MAAAA,OAAO,EAAE,4EADV;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAX6B,CAA9B;AAgBA;AACD,CAnBD,C,CAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,iCACItB,iBAAiB,CAACD,cAAD,EAAiBE,SAAS,CAACsB,aAA3B,EAA0Cf,aAA1C,EAAyDQ,iBAAzD,CADrB;AAECQ,EAAAA,QAAQ,EAAE,kBAACC,KAAD,EAAW;AACpBtB,IAAAA,UAAU,GAAGsB,KAAb;AACA,GAJF;AAKCnB,EAAAA,iBAAiB,EAAjBA;AALD","sourcesContent":["import SuperagentBase, {enhanceSuperAgent} from \"./SuperagentBase\";\nimport Constants from \"../Constants\";\nimport Notifications from \"../ui/connected/Notifications/Notifications\";\n\n//If had a existing stored token, use it\nlet base64Auth = sessionStorage.getItem(\"jwtToken\");\n\nconst getBackendHeaders = () => {\n\tlet obj = {\n\t\t'Content-Type': 'application/json',\n\t};\n\n\tif (base64Auth)\n\t\tobj[\"Authorization\"] = \"Bearer \" + base64Auth;\n\n\treturn obj;\n};\n\nconst headersPlugin = (req) => {\n\tlet headers = getBackendHeaders();\n\n\tObject.keys(headers).forEach(e => {\n\t\treq.set(e, headers[e]);\n\t});\n};\n\nconst interceptorPlugin = (err, res) => {\n\tif (err && !res) {\n\t\tNotifications.addNotification([\n\t\t\t{\n\t\t\t\ttitle: \"Causa 2: \",\n\t\t\t\tmessage: \"O nosso servidor está enfrentando problemas temporários. \",\n\t\t\t\tseverity: \"DANGER\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Causa 1: \",\n\t\t\t\tmessage: \"Seu computador está sem acesso a internet. \",\n\t\t\t\tseverity: \"DANGER\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tmessage: \"Não foi possível realizar a ação solicitada. \\n As causas mais comuns são:\",\n\t\t\t\tseverity: \"DANGER\",\n\t\t\t},\n\t\t])\n\t}\n};\n\n// const multipart = (url, headers, method, data) => {\n// \treturn new Promise((resolve, reject) => {\n// \t\twindow.$.ajax({\n// \t\t\turl: `${Constants.API_BASE_PATH}${url}`,\n// \t\t\ttype: method,\n// \t\t\theaders,\n// \t\t\tdata: data,\n// \t\t\tcache: false,\n// \t\t\tcontentType: false,\n// \t\t\tprocessData: false,\n// \t\t\tsuccess: (res) => resolve({body: res}),\n// \t\t\terror: (res) => reject({response: {body: JSON.parse(res.responseText)}})\n// \t\t});\n// \t});\n// };\n\n\nexport default {\n\t...enhanceSuperAgent(SuperagentBase, Constants.API_BASE_PATH, headersPlugin, interceptorPlugin),\n\tsetToken: (token) => {\n\t\tbase64Auth = token;\n\t},\n\tgetBackendHeaders\n}"]},"metadata":{},"sourceType":"module"}